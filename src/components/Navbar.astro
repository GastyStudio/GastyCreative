---
import { Menu, X, Github, Youtube, Instagram } from 'lucide-astro';
---

<nav class="fixed top-0 left-0 w-full z-[100] transition-all duration-300 py-6 overflow-x-hidden" id="navbar">
  <div class="container mx-auto px-6 flex items-center justify-between">
    <!-- Logo -->
    <a href="/" class="group flex items-center">
      <img src="/brand-logo.png" alt="Gasty Creative Logo" class="h-12 md:h-16 w-auto group-hover:scale-105 transition-all duration-300" />
    </a>

    <!-- Desktop menu -->
    <div class="hidden lg:flex items-center gap-10">
      <div class="flex items-center gap-8 text-white/70 font-bold uppercase text-xs tracking-widest bg-charcoal-grey/40 backdrop-blur-md px-8 py-4 rounded-full border border-white/5">
        <a href="#portfolio" class="hover:text-electric-blue transition-colors">Proyectos</a>
        <a href="#servicios" class="hover:text-electric-blue transition-colors">Servicios</a>
        <a href="https://wa.me/5491164246726" target="_blank" class="hover:text-electric-blue transition-colors">Contacto</a>
      </div>
      
      <a href="https://wa.me/5491164246726" target="_blank" class="px-6 py-3 bg-white text-black font-bold uppercase text-xs tracking-widest rounded-full hover:bg-electric-blue hover:text-white transition-all hover:scale-105 active:scale-95 shadow-sm flex items-center gap-2">
        <img src="/whatsapp-favicon.png" alt="" class="w-5 h-5" />
        Start Project
      </a>
    </div>

    <!-- Mobile toggle -->
    <button class="lg:hidden text-white" id="menu-toggle">
      <Menu id="menu-icon" class="w-8 h-8" />
    </button>
  </div>

  <!-- Mobile Menu Overlay -->
  <div id="mobile-menu" class="fixed inset-0 bg-black-deep/98 backdrop-blur-2xl z-[110] translate-x-full hidden transition-all duration-500 lg:hidden flex-col items-center justify-center p-10 text-center">
    <button class="absolute top-8 right-8 text-white" id="close-menu">
      <X class="w-10 h-10" />
    </button>
    
    <div class="flex flex-col gap-8 mb-16">
      <a href="#portfolio" class="mobile-link text-4xl font-bold hover:text-electric-blue transition-colors">Proyectos</a>
      <a href="#servicios" class="mobile-link text-4xl font-bold hover:text-electric-blue transition-colors">Servicios</a>
      <a href="https://wa.me/5491164246726" target="_blank" class="mobile-link text-4xl font-bold hover:text-electric-blue transition-colors">Contacto</a>
    </div>
    
    <div class="flex gap-6 mb-12">
      <a href="#" class="p-3 bg-white/5 rounded-full hover:text-electric-blue transition-colors border border-white/10"><Youtube class="w-6 h-6" /></a>
      <a href="#" class="p-3 bg-white/5 rounded-full hover:text-electric-blue transition-colors border border-white/10" title="TikTok">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
          <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1.04-.1z"/>
        </svg>
      </a>
      <a href="#" class="p-3 bg-white/5 rounded-full hover:text-electric-blue transition-colors border border-white/10"><Instagram class="w-6 h-6" /></a>
      <a href="#" class="p-3 bg-white/5 rounded-full hover:text-electric-blue transition-colors border border-white/10"><Github class="w-6 h-6" /></a>
    </div>
    
    <a href="https://wa.me/5491164246726" target="_blank" class="w-full py-5 bg-electric-blue text-black font-bold text-xl rounded-2xl flex items-center justify-center gap-3">
      <img src="/whatsapp-favicon.png" alt="" class="w-8 h-8" />
      Hablemos ahora
    </a>
  </div>
</nav>

<script>
  let lastScroll = 0;
  const navbar = document.getElementById('navbar');
  const menuToggle = document.getElementById('menu-toggle');
  const closeMenu = document.getElementById('close-menu');
  const mobileMenu = document.getElementById('mobile-menu');
  const mobileLinks = document.querySelectorAll('.mobile-link');

  // Logic for the navbar appearance on scroll
  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    if (currentScroll > 100) {
      navbar?.classList.add('bg-black-deep/80', 'backdrop-blur-xl', 'border-b', 'border-white/5', 'py-4');
      navbar?.classList.remove('py-6');
    } else {
      navbar?.classList.remove('bg-black-deep/80', 'backdrop-blur-xl', 'border-b', 'border-white/5', 'py-4');
      navbar?.classList.add('py-6');
    }
    lastScroll = currentScroll;
  });

  // Mobile menu logic
  menuToggle?.addEventListener('click', () => {
    mobileMenu?.classList.remove('translate-x-full', 'hidden');
    mobileMenu?.classList.add('flex');
  });

  closeMenu?.addEventListener('click', () => {
    mobileMenu?.classList.replace('flex', 'hidden');
    mobileMenu?.classList.add('translate-x-full');
  });

  mobileLinks.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.replace('flex', 'hidden');
      mobileMenu?.classList.add('translate-x-full');
    });
  });
</script>
